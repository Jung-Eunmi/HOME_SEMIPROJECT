<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>êµ¬ì¡°ë™ë¬¼</title>
    <link rel="stylesheet" href="/main/css/main-style.css"> <!-- ë©”ì¸ ìŠ¤íƒ€ì¼ ì—°ê²° -->
    <script src="/main/js/main.js"></script> <!-- ë©”ì¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—°ê²° -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=keyboard_arrow_down" />
    <link rel="stylesheet" href="/sidemenu/animals/css/animals-style.css">
</head>
<body>
<header>
    <div class="side-menu-bar">
        <ul>
            <li><a href="/main">ğŸ¶PetHarmonyğŸ¶</a></li>
            <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/schedule')">ê·¼íƒœê´€ë¦¬</a></li>
            <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/messenger')">ë©”ì‹ ì €(ì±„íŒ…)</a></li>
            <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/mail')">ì´ë©”ì¼</a></li>
            <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/adoption')">ì…ì–‘</a></li>
            <li class="animal-menu">
                <div class="menu-wrapper">
                    <a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/animals')">ë™ë¬¼
                        <span class="material-symbols-outlined">keyboard_arrow_down</span>
                    </a>
                </div>
                <ul class="sub-menu">
                    <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/animals')">êµ¬ì¡°ë™ë¬¼</a></li>
                    <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/adoptionComplete')">ì…ì–‘ì™„ë£Œ</a></li>
                    <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/stock')">ì¬ê³ ê´€ë¦¬</a></li>
                </ul>
            </li>
            <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/facilities')">ì‹œì„¤ê´€ë¦¬</a></li>
            <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/board')">ì „ì‚¬ê²Œì‹œíŒ</a></li>
            <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/employee')">ì§ì›ì •ë³´</a></li>
            <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/mypage')">ë§ˆì´í˜ì´ì§€</a></li>
            <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/approval')">ê²°ì¬</a></li>
            <li class="admin-menu">
                <div class="admin-menu-wrapper">
                    <a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/manager')">ê´€ë¦¬ìì „ìš©
                        <span class="material-symbols-outlined">keyboard_arrow_down</span>
                    </a>
                </div>
                <ul class="sub-menu">
                    <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/manager')">ê´€ë¦¬ìí˜ì´ì§€</a></li>
                    <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/employeeRegister')">ì‚¬ì›ë“±ë¡</a></li>
                    <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/employeeManagement')">ì§ì›ê´€ë¦¬</a></li>
                    <li><a href="javascript:void(0);" onclick="loadContent('http://localhost:9595/sidemenu/approvalBox')">ê²°ì¬í•¨</a></li>
                </ul>
            </li>
        </ul>
    </div>
</header>
<div class="change-screen-animals">
    <div id="change-screen-content">
        <div class="animals">
            <form id="deleteCheck" action="/sidemenu/animals/delete" method="post">
                <div style="text-align: right;">
                    <button onclick="location.href='/sidemenu/animals/insert'">ë“±ë¡</button>
                    <button type="button" id="deleteButton" onclick="deleteSelected()">ì‚­ì œ</button>
                </div>

                <table border="1" class="post-list">
                    <thead>
                    <tr>
                        <th><input type="checkbox" id="selectAll" name="selectAll" onclick="toggleAll(this)">ì „ì²´</th>
                        <th>ë‹´ë‹¹ì</th>
                        <th>êµ¬ì¡° ëœ ë‚ ì§œ</th>
                        <th>ì‚¬ì§„</th>
                        <th>ë™ë¬¼ë“±ë¡ë²ˆí˜¸</th>
                        <th>ë¶„ë¥˜</th>
                        <th>í’ˆì¢…</th>
                        <th>ì„±ë³„</th>
                        <th>ë‚˜ì´</th>
                        <th>êµ¬ì¡° ëœ ìœ„ì¹˜</th>
                        <th>ìƒíƒœ</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="allList : ${list}">
                        <td><input type="checkbox" id="animalSelect" name="animalSelect" value="${allList.animalCode}" /></td>
                        <td th:text="${allList.empDTO.empName}"></td>
                        <td th:text="${#dates.format(allList.rescueDate, 'yyyy-MM-dd')}"></td>
                        <td th:text="${allList.animalCode}"></td>
                        <td th:text="${allList.animalCode}"></td>
                        <td th:text="${allList.typeDTO.typeName}"></td>
                        <td th:text="${allList.breedDTO.breedName}"></td>
                        <td th:text="${allList.gender}"></td>
                        <td th:text="${allList.age}"></td>
                        <td th:text="${allList.rescueLocation}"></td>
                        <td th:text="${allList.animalStatus}"></td>
                    </tr>
                    </tbody>
                </table>
            </form>

            <script>
                // ì²´í¬ë°•ìŠ¤ ì „ì²´ ì„ íƒ/í•´ì œ ë¶€ë¶„
                function toggleAll(source) {
                    const checkboxes = document.getElementsByName('animalSelect');
                    checkboxes.forEach(checkbox => {
                        checkbox.checked = source.checked;
                    });
                }

                // ì²´í¬ë°•ìŠ¤ ì„ íƒ í›„ ì‚­ì œí•˜ëŠ” ë¶€ë¶„
                function deleteSelected() {
                    const form = document.getElementById('deleteCheck');
                    const checkboxes = document.getElementsByName('animalSelect');
                    const selected = [];

                    checkboxes.forEach(checkbox => {
                        if (checkbox.checked) {
                            selected.push(checkbox.value);
                        }});

                    if (selected.length === 0) {
                        alert('ì‚­ì œí•  í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”.');
                        return;
                    }

                    if (confirm('ì •ë§ë¡œ ì„ íƒí•œ í•­ëª©ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        // ì„ íƒëœ í•­ëª©ë“¤ì„ ìˆ¨ì€ ì…ë ¥ í•„ë“œë¡œ ì¶”ê°€
                        selected.forEach(value => {
                            const input = document.createElement('input');
                            input.type = 'hidden';
                            input.name = 'animalCodes';
                            input.value = value;
                            form.appendChild(input);
                        });

                        // í¼ ì œì¶œ
                        form.submit();
                    }
                }
            </script>

            <div style="text-align: center" role="toolbar">
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-outline-secondary"
                            th:each="i : ${#numbers.sequence(1, totalPages)}"
                            th:text="${i}"
                            th:classappend="${currentPage == i ? 'btn-primary' : ''}"
                            th:onclick="|location.href='/sidemenu/animals?page=' + ${i} + '&limit=15'|">
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>